<?xml version="1.0"?>
<project name="Lucene With Geo-Temporal Extensions - Experiments" basedir=".">

    <description>Lucene With Geo-Temporal Extensions - Experiments</description>

    <import file="build.xml"/>


    <target name="build-test-index-brauncorpus" depends="" description="Index a Collection and run all the topics">
        <mkdir dir="${webapp.path}/WEB-INF/brauncorpus/test-data/output"/>
        <java fork="true" classname="pt.utl.ist.lucene.treceval.BrounCorpusExample">
            <classpath>
                <fileset dir="${base.dir}/lib">
                    <include name="**.jar" />
                    <exclude name="servlet-api.jar" />
                    <exclude name="jsp-api.jar" />
                </fileset>
            </classpath>
            <classpath path="${webapp.path}/WEB-INF/classes" />
            <arg value="${webapp.path}/WEB-INF/test-index" />
            <arg value="${webapp.path}/WEB-INF/test-data" />
        </java>
        <antcall target="copyIndexesToDataDirs"/>
    </target>

    <target name="build-test-index-cran" depends="" description="Index a Collection and run all the topics">
        <mkdir dir="${webapp.path}/WEB-INF/cran/test-data/output"/>
        <java fork="true" classname="pt.utl.ist.lucene.treceval.CranfieldExample">
            <classpath>
                <fileset dir="${base.dir}/lib">
                    <include name="**.jar" />
                    <exclude name="servlet-api.jar" />
                    <exclude name="jsp-api.jar" />
                </fileset>
            </classpath>
            <classpath path="${webapp.path}/WEB-INF/classes" />
            <arg value="${webapp.path}/WEB-INF/test-index" />
            <arg value="${webapp.path}/WEB-INF/test-data" />
        </java>
        <antcall target="copyIndexesToDataDirs"/>
    </target>

    <target name="build-test-index-dmoz" depends="" description="Index a Collection and run all the topics">
        <mkdir dir="${webapp.path}/WEB-INF/dmoz/test-data/output"/>
        <java fork="true" classname="pt.utl.ist.lucene.treceval.DmozExample" jvmargs="-server">
            <classpath>
                <fileset dir="${base.dir}/lib">
                    <include name="**.jar" />
                    <exclude name="servlet-api.jar" />
                    <exclude name="jsp-api.jar" />
                </fileset>
            </classpath>
            <classpath path="${webapp.path}/WEB-INF/classes" />
            <arg value="${webapp.path}/WEB-INF/test-index" />
            <arg value="${webapp.path}/WEB-INF/test-data" />
        </java>
        <antcall target="copyIndexesToDataDirs"/>
    </target>

    <target name="build-test-index-geoclef" depends="" description="Index a Collection and run all the topics">
        <mkdir dir="${webapp.path}/WEB-INF/geoclef/test-data/output"/>
        <java fork="true" classname="pt.utl.ist.lucene.treceval.geoclef.indexer.GeoClefIndexer" jvmargs="-server -Xmx1024m -Xms1024m -XX:PermSize=256m -XX:MaxPermSize=256m">
            <classpath>
                <fileset dir="${base.dir}/lib">
                    <include name="**.jar" />
                    <exclude name="servlet-api.jar" />
                    <exclude name="jsp-api.jar" />
                </fileset>
            </classpath>
            <classpath path="${webapp.path}/WEB-INF/classes" />
            <arg value="${webapp.path}/WEB-INF/test-index" />
            <arg value="${webapp.path}/WEB-INF/test-data" />
        </java>
    </target>

    <target name="build-test-index-digmap" depends="" description="Index a Collection and run all the topics">
        <mkdir dir="${webapp.path}/WEB-INF/test-data/digmap/output"/>
        <java fork="true" classname="pt.utl.ist.lucene.treceval.DigmapExample">

            <classpath>
                <fileset dir="${base.dir}/lib">
                    <include name="**.jar" />
                    <exclude name="servlet-api.jar" />
                    <exclude name="jsp-api.jar" />
                </fileset>
            </classpath>
            <classpath path="${webapp.path}/WEB-INF/classes" />
            <arg value="${webapp.path}/WEB-INF/test-index" />
            <arg value="${webapp.path}/WEB-INF/test-data" />
        </java>
        <antcall target="copyIndexesToDataDirs"/>
    </target>

    <target name="build-test-index-brauncorpus-evaluate" depends="compile" description="Index a Collection and run all the topics">
        <antcall target="build-test-index-brauncorpus"/>
        <antcall target="evaluation-metrics-brauncorpus" />
        <antcall target="significance-tests-brauncorpus" />
    </target>

    <target name="build-test-index-cran-evaluate" depends="compile" description="Index a Collection and run all the topics">
        <antcall target="build-test-index-cran"/>
        <antcall target="evaluation-metrics-cran" />
        <antcall target="significance-tests-cran" />
    </target>


    <target name="build-test-index-dmoz-evaluate" depends="compile" description="Index a Collection and run all the topics">
        <antcall target="build-test-index-dmoz"/>
        <antcall target="evaluation-metrics-dmoz" />
        <antcall target="significance-tests-dmoz" />
    </target>

    <target name="build-test-index-geoclef-evaluate" depends="" description="Index a Collection and run all the topics">
        <antcall target="build-test-index-geoclef"/>
        <antcall target="evaluation-metrics-geoclef" />
    </target>



    <target name="evaluation-metrics-brauncorpus" description="Generate trec_eval results">
        <for param="runfile">
            <path>
                <fileset dir="${webapp.path}/WEB-INF/test-data/brauncorpus/output/">
                    <include name="*.txt" />
                    <exclude name="*-treceval-report.txt" />
                    <exclude name="*-significance-report.txt" />
                </fileset>
            </path>
            <sequential>
                <java fork="true" classname="ireval.Main" output="@{runfile}-treceval-report.txt">
                    <classpath>
                        <fileset dir="${base.dir}/lib">
                            <include name="*.jar" />
                        </fileset>
                        <fileset dir="${base.dir}/lib">
                            <include name="*.jar" />
                        </fileset>
                    </classpath>
                    <classpath path="${webapp.path}/WEB-INF/classes" />
                    <arg value="@{runfile}" />
                    <arg value="${webapp.path}/WEB-INF/test-data/brauncorpus/assessements/qrels.ac-gls.txt" />
                </java>
            </sequential>
        </for>
    </target>

    <target name="evaluation-metrics-cran" description="Generate trec_eval results">
        <for param="runfile">
            <path>
                <fileset dir="${webapp.path}/WEB-INF/test-data/cran/output/">
                    <include name="*.txt" />
                    <exclude name="*-treceval-report.txt" />
                    <exclude name="*-significance-report.txt" />
                </fileset>
            </path>
            <sequential>
                <java fork="true" classname="ireval.Main" output="@{runfile}-treceval-report.txt">
                    <classpath>
                        <fileset dir="${base.dir}/lib">
                            <include name="*.jar" />
                        </fileset>
                        <fileset dir="${base.dir}/lib">
                            <include name="*.jar" />
                        </fileset>
                    </classpath>
                    <classpath path="${webapp.path}/WEB-INF/classes" />
                    <arg value="@{runfile}" />
                    <arg value="${webapp.path}/WEB-INF/test-data/cran/assessements/cran.qrels" />
                </java>
            </sequential>
        </for>
    </target>


    <target name="evaluation-metrics-dmoz" description="Generate trec_eval results">
        <for param="runfile">
            <path>
                <fileset dir="${webapp.path}/WEB-INF/test-data/dmoz/output/">
                    <include name="*.txt" />
                    <exclude name="*-treceval-report.txt" />
                    <exclude name="*-significance-report.txt" />
                </fileset>
            </path>
            <sequential>
                <java fork="true" classname="ireval.Main" output="@{runfile}-treceval-report.txt">
                    <classpath>
                        <fileset dir="${base.dir}/lib">
                            <include name="*.jar" />
                        </fileset>
                        <fileset dir="${base.dir}/lib">
                            <include name="*.jar" />
                        </fileset>
                    </classpath>
                    <classpath path="${webapp.path}/WEB-INF/classes" />
                    <arg value="@{runfile}" />
                    <arg value="${webapp.path}/WEB-INF/test-data/dmoz/assessements/qrels" />
                </java>
            </sequential>
        </for>
    </target>


    <target name="evaluation-metrics-geoclef" description="Generate trec_eval results">
        <for param="runfile">
            <path>
                <fileset dir="${webapp.path}/WEB-INF/test-data/geoclef08en/output/">
                    <include name="*.txt" />
                    <exclude name="*-treceval-report.txt" />
                    <exclude name="*-significance-report.txt" />
                </fileset>
            </path>
            <sequential>
                <java fork="true" classname="ireval.Main" output="@{runfile}-treceval-report.txt">
                    <classpath>
                        <fileset dir="${base.dir}/lib">
                            <include name="*.jar" />
                        </fileset>
                        <fileset dir="${base.dir}/lib">
                            <include name="*.jar" />
                        </fileset>
                    </classpath>
                    <classpath path="${webapp.path}/WEB-INF/classes" />
                    <arg value="@{runfile}" />
                    <arg value="${webapp.path}/WEB-INF/test-data/geoclef08en/assessements/qrels.gen" />
                </java>
            </sequential>
        </for>
    </target>

    <target name="evaluation-metrics-clef2008AdHoc" description="Generate trec_eval results">
        <for param="runfile">
            <path>
                <fileset dir="${webapp.path}/WEB-INF/test-data/clef2008AdHoc/output/bl">
                    <include name="*.txt" />
                    <exclude name="*-treceval-report.txt" />
                    <exclude name="*-significance-report.txt" />
                </fileset>
            </path>
            <sequential>
                <java fork="true" classname="ireval.Main" output="@{runfile}-treceval-report.txt">
                    <classpath>
                        <fileset dir="${base.dir}/lib">
                            <include name="*.jar" />
                        </fileset>
                        <fileset dir="${base.dir}/lib">
                            <include name="*.jar" />
                        </fileset>
                    </classpath>
                    <classpath path="${webapp.path}/WEB-INF/classes" />
                    <arg value="@{runfile}" />
                    <arg value="${webapp.path}/WEB-INF/test-data/clef2008AdHoc/assessements/bl/10.2454-AH-TEL-ENGLISH-CLEF2008.txt" />
                </java>
            </sequential>
        </for>

        <for param="runfile">
            <path>
                <fileset dir="${webapp.path}/WEB-INF/test-data/clef2008AdHoc/output/bnf">
                    <include name="*.txt" />
                    <exclude name="*-treceval-report.txt" />
                    <exclude name="*-significance-report.txt" />
                </fileset>
            </path>
            <sequential>
                <java fork="true" classname="ireval.Main" output="@{runfile}-treceval-report.txt">
                    <classpath>
                        <fileset dir="${base.dir}/lib">
                            <include name="*.jar" />
                        </fileset>
                        <fileset dir="${base.dir}/lib">
                            <include name="*.jar" />
                        </fileset>
                    </classpath>
                    <classpath path="${webapp.path}/WEB-INF/classes" />
                    <arg value="@{runfile}" />
                    <arg value="${webapp.path}/WEB-INF/test-data/clef2008AdHoc/assessements/bnf/10.2454-AH-TEL-FRENCH-CLEF2008.txt" />
                </java>
            </sequential>
        </for>

        <for param="runfile">
            <path>
                <fileset dir="${webapp.path}/WEB-INF/test-data/clef2008AdHoc/output/onb">
                    <include name="*.txt" />
                    <exclude name="*-treceval-report.txt" />
                    <exclude name="*-significance-report.txt" />
                </fileset>
            </path>
            <sequential>
                <java fork="true" classname="ireval.Main" output="@{runfile}-treceval-report.txt">
                    <classpath>
                        <fileset dir="${base.dir}/lib">
                            <include name="*.jar" />
                        </fileset>
                        <fileset dir="${base.dir}/lib">
                            <include name="*.jar" />
                        </fileset>
                    </classpath>
                    <classpath path="${webapp.path}/WEB-INF/classes" />
                    <arg value="@{runfile}" />
                    <arg value="${webapp.path}/WEB-INF/test-data/clef2008AdHoc/assessements/onb/10.2454-AH-TEL-GERMAN-CLEF2008.txt" />
                </java>
            </sequential>
        </for>
    </target>



	<target name="evaluation-metrics-clef2009AdHoc" description="Generate trec_eval results">
        <for param="runfile">
            <path>
                <fileset dir="${webapp.path}/WEB-INF/test-data/clef2009AdHoc/output/bl">
                    <include name="*.txt" />
                    <exclude name="*-treceval-report.txt" />
                    <exclude name="*-significance-report.txt" />
                </fileset>
            </path>
            <sequential>
                <java fork="true" classname="ireval.Main" output="@{runfile}-treceval-report.txt">
                    <classpath>
                        <fileset dir="${base.dir}/lib">
                            <include name="*.jar" />
                        </fileset>
                        <fileset dir="${base.dir}/lib">
                            <include name="*.jar" />
                        </fileset>
                    </classpath>
                    <classpath path="${webapp.path}/WEB-INF/classes" />
                    <arg value="@{runfile}" />
                    <arg value="${webapp.path}/WEB-INF/test-data/clef2009AdHoc/assessements/bl/10.2454_AH-TEL-ENGLISH-CLEF2009.txt" />
                </java>
            </sequential>
        </for>

        <for param="runfile">
            <path>
                <fileset dir="${webapp.path}/WEB-INF/test-data/clef2009AdHoc/output/bnf">
                    <include name="*.txt" />
                    <exclude name="*-treceval-report.txt" />
                    <exclude name="*-significance-report.txt" />
                </fileset>
            </path>
            <sequential>
                <java fork="true" classname="ireval.Main" output="@{runfile}-treceval-report.txt">
                    <classpath>
                        <fileset dir="${base.dir}/lib">
                            <include name="*.jar" />
                        </fileset>
                        <fileset dir="${base.dir}/lib">
                            <include name="*.jar" />
                        </fileset>
                    </classpath>
                    <classpath path="${webapp.path}/WEB-INF/classes" />
                    <arg value="@{runfile}" />
                    <arg value="${webapp.path}/WEB-INF/test-data/clef2009AdHoc/assessements/bnf/10.2454_AH-TEL-FRENCH-CLEF2009.txt" />
                </java>
            </sequential>
        </for>

        <for param="runfile">
            <path>
                <fileset dir="${webapp.path}/WEB-INF/test-data/clef2009AdHoc/output/onb">
                    <include name="*.txt" />
                    <exclude name="*-treceval-report.txt" />
                    <exclude name="*-significance-report.txt" />
                </fileset>
            </path>
            <sequential>
                <java fork="true" classname="ireval.Main" output="@{runfile}-treceval-report.txt">
                    <classpath>
                        <fileset dir="${base.dir}/lib">
                            <include name="*.jar" />
                        </fileset>
                        <fileset dir="${base.dir}/lib">
                            <include name="*.jar" />
                        </fileset>
                    </classpath>
                    <classpath path="${webapp.path}/WEB-INF/classes" />
                    <arg value="@{runfile}" />
                    <arg value="${webapp.path}/WEB-INF/test-data/clef2009AdHoc/assessements/onb/10.2454_AH-TEL-GERMAN-CLEF2009.txt" />
                </java>
            </sequential>
        </for>
    </target>



    <target name="significance-tests-brauncorpus" description="Generate trec_eval results">
        <for param="runfile">
            <path>
                <fileset dir="${webapp.path}/WEB-INF/test-data/brauncorpus/output/">
                    <include name="*.txt" />
                    <exclude name="*-treceval-report.txt" />
                    <exclude name="*-significance-report.txt" />
                </fileset>
            </path>
            <sequential>
                <for param="runfile2">
                    <path>
                        <fileset dir="${webapp.path}/WEB-INF/test-data/brauncorpus/output/">
                            <include name="*.txt" />
                            <exclude name="*-treceval-report.txt" />
                            <exclude name="*-significance-report.txt" />
                            <exclude name="@{runfile}" />
                        </fileset>
                    </path>
                    <sequential>
                        <java fork="true" classname="ireval.Main">
                            <classpath>
                                <fileset dir="${base.dir}/lib">
                                    <include name="**.jar" />
                                </fileset>
                                <fileset dir="${base.dir}/lib">
                                    <include name="*.jar" />
                                </fileset>
                            </classpath>
                            <classpath path="${webapp.path}/WEB-INF/classes" />
                            <arg value="@{runfile}" />
                            <arg value="@{runfile2}" />
                            <arg value="${webapp.path}/WEB-INF/test-data/brauncorpus/assessements/qrels.ac-gls.txt" />
                        </java>
                    </sequential>
                </for>
            </sequential>
        </for>
    </target>




    <target name="significance-tests-cran" description="Generate trec_eval results">
        <for param="runfile">
            <path>
                <fileset dir="${webapp.path}/WEB-INF/test-data/cran/output/">
                    <include name="*.txt" />
                    <exclude name="*-treceval-report.txt" />
                    <exclude name="*-significance-report.txt" />
                </fileset>
            </path>
            <sequential>
                <for param="runfile2">
                    <path>
                        <fileset dir="${webapp.path}/WEB-INF/test-data/cran/output/">
                            <include name="*.txt" />
                            <exclude name="*-treceval-report.txt" />
                            <exclude name="*-significance-report.txt" />
                            <exclude name="@{runfile}" />
                        </fileset>
                    </path>
                    <sequential>
                        <java fork="true" classname="ireval.Main">
                            <classpath>
                                <fileset dir="${base.dir}/lib">
                                    <include name="**.jar" />
                                </fileset>
                                <fileset dir="${base.dir}/lib">
                                    <include name="*.jar" />
                                </fileset>
                            </classpath>
                            <classpath path="${webapp.path}/WEB-INF/classes" />
                            <arg value="@{runfile}" />
                            <arg value="@{runfile2}" />
                            <arg value="${webapp.path}/WEB-INF/test-data/cran/assessements/cran.qrels" />
                        </java>
                    </sequential>
                </for>
            </sequential>
        </for>
    </target>

    <target name="significance-tests-dmoz" description="Generate trec_eval results">
        <for param="runfile">
            <path>
                <fileset dir="${webapp.path}/WEB-INF/test-data/dmoz/output/">
                    <include name="*.txt" />
                    <exclude name="*-treceval-report.txt" />
                    <exclude name="*-significance-report.txt" />
                </fileset>
            </path>
            <sequential>
                <for param="runfile2">
                    <path>
                        <fileset dir="${webapp.path}/WEB-INF/test-data/dmoz/output/">
                            <include name="*.txt" />
                            <exclude name="*-treceval-report.txt" />
                            <exclude name="*-significance-report.txt" />
                            <exclude name="@{runfile}" />
                        </fileset>
                    </path>
                    <sequential>
                        <java fork="true" classname="ireval.Main">
                            <classpath>
                                <fileset dir="${base.dir}/lib">
                                    <include name="**.jar" />
                                </fileset>
                                <fileset dir="${base.dir}/lib">
                                    <include name="*.jar" />
                                </fileset>
                            </classpath>
                            <classpath path="${webapp.path}/WEB-INF/classes" />
                            <arg value="@{runfile}" />
                            <arg value="@{runfile2}" />
                            <arg value="${webapp.path}/WEB-INF/test-data/dmoz/assessements/qrels" />
                        </java>
                    </sequential>
                </for>
            </sequential>
        </for>
    </target>

    <target name="significance-tests-geoclef" description="Generate trec_eval results">
        <for param="runfile">
            <path>
                <fileset dir="${webapp.path}/WEB-INF/test-data/geoclef08en/base/">
                    <include name="*.txt" />
                    <exclude name="*-treceval-report.txt" />
                    <exclude name="*-significance-report.txt" />
                </fileset>
            </path>
            <sequential>
                <for param="runfile2">
                    <path>
                        <fileset dir="${webapp.path}/WEB-INF/test-data/geoclef08en/output/">
                            <include name="*.txt" />
                            <exclude name="*-treceval-report.txt" />
                            <exclude name="*-significance-report.txt" />
                            <exclude name="@{runfile}" />
                        </fileset>
                    </path>
                    <sequential>
                        <java fork="true" classname="ireval.Main" output="@{runfile2}-significance-report.txt">
                            <classpath>
                                <fileset dir="${base.dir}/lib">
                                    <include name="**.jar" />
                                </fileset>
                                <fileset dir="${base.dir}/lib">
                                    <include name="*.jar" />
                                </fileset>
                            </classpath>
                            <classpath path="${webapp.path}/WEB-INF/classes" />
                            <arg value="@{runfile}" />
                            <arg value="@{runfile2}" />
                            <arg value="${webapp.path}/WEB-INF/test-data/geoclef08en/assessements/qrels.gen" />
                        </java>
                    </sequential>
                </for>
            </sequential>
        </for>
    </target>



    <target name="significance-tests-clef2009AdHoc" description="Generate trec_eval results">
        <for param="runfile">
            <path>
                <fileset dir="${webapp.path}/WEB-INF/test-data/clef2009AdHoc/baseline">
                    <include name="*.txt" />
                </fileset>
            </path>
            <sequential>
                <for param="runfile2">
                    <path>
                        <fileset dir="${webapp.path}/WEB-INF/test-data/clef2009AdHoc/output/bl">
                            <include name="*.txt" />
                            <exclude name="*-treceval-report.txt" />
                            <exclude name="*-significance-report.txt" />
                            <exclude name="*.xml" />
                        </fileset>
                    </path>
                    <sequential>

                        <java fork="true" classname="ireval.Main" output="@{runfile2}-significance-report.txt" >
                            <classpath>
                                <fileset dir="${base.dir}/lib">
                                    <include name="**.jar" />
                                </fileset>
                                <fileset dir="${base.dir}/lib">
                                    <include name="*.jar" />
                                </fileset>
                            </classpath>
                            <classpath path="${webapp.path}/WEB-INF/classes" />
                            <arg value="@{runfile}" />
                            <arg value="@{runfile2}" />
                            <arg value="${webapp.path}/WEB-INF/test-data/clef2009AdHoc/assessements/bl/10.2454_AH-TEL-ENGLISH-CLEF2009.txt" />
                        </java>
                    </sequential>
                </for>
            </sequential>
        </for>


    </target>

     <target name="significance-tests-clef2009AdHocFR" description="Generate trec_eval results">
        <for param="runfile">
            <path>
                <fileset dir="${webapp.path}/WEB-INF/test-data/clef2009AdHoc/baselineBnf">
                    <include name="*.txt" />
                </fileset>
            </path>
            <sequential>
                <for param="runfile2">
                    <path>
                        <fileset dir="${webapp.path}/WEB-INF/test-data/clef2009AdHoc/output/bnf">
                            <include name="*.txt" />
                            <exclude name="*-treceval-report.txt" />
                            <exclude name="*-significance-report.txt" />
                            <exclude name="*.xml" />
                        </fileset>
                    </path>
                    <sequential>

                        <java fork="true" classname="ireval.Main" output="@{runfile2}-significance-report.txt" >
                            <classpath>
                                <fileset dir="${base.dir}/lib">
                                    <include name="**.jar" />
                                </fileset>
                                <fileset dir="${base.dir}/lib">
                                    <include name="*.jar" />
                                </fileset>
                            </classpath>
                            <classpath path="${webapp.path}/WEB-INF/classes" />
                            <arg value="@{runfile}" />
                            <arg value="@{runfile2}" />
                            <arg value="${webapp.path}/WEB-INF/test-data/clef2009AdHoc/assessements/bnf/10.2454_AH-TEL-FRENCH-CLEF2009.txt" />
                        </java>
                    </sequential>
                </for>
            </sequential>
        </for>


    </target>


    <target name="significance-tests-clef2009AdHocONB" description="Generate trec_eval results">
            <for param="runfile">
                <path>
                    <fileset dir="${webapp.path}/WEB-INF/test-data/clef2009AdHoc/baselineOnb">
                        <include name="*.txt" />
                    </fileset>
                </path>
                <sequential>
                    <for param="runfile2">
                        <path>
                            <fileset dir="${webapp.path}/WEB-INF/test-data/clef2009AdHoc/output/onb">
                                <include name="*.txt" />
                                <exclude name="*-treceval-report.txt" />
                                <exclude name="*-significance-report.txt" />
                                <exclude name="*.xml" />
                            </fileset>
                        </path>
                        <sequential>

                            <java fork="true" classname="ireval.Main" output="@{runfile2}-significance-report.txt" >
                                <classpath>
                                    <fileset dir="${base.dir}/lib">
                                        <include name="**.jar" />
                                    </fileset>
                                    <fileset dir="${base.dir}/lib">
                                        <include name="*.jar" />
                                    </fileset>
                                </classpath>
                                <classpath path="${webapp.path}/WEB-INF/classes" />
                                <arg value="@{runfile}" />
                                <arg value="@{runfile2}" />
                                <arg value="${webapp.path}/WEB-INF/test-data/clef2009AdHoc/assessements/onb/10.2454_AH-TEL-GERMAN-CLEF2009.txt" />
                            </java>
                        </sequential>
                    </for>
                </sequential>
            </for>


        </target>


    <target name="significance-tests-clef2008AdHoc" description="Generate trec_eval results">
        <for param="runfile">
            <path>
                <fileset dir="${webapp.path}/WEB-INF/test-data/clef2008AdHoc/base/bl">
                    <include name="*.txt" />
                    <exclude name="*-treceval-report.txt" />
                    <exclude name="*-significance-report.txt" />
                </fileset>
            </path>
            <sequential>
                <for param="runfile2">
                    <path>
                        <fileset dir="${webapp.path}/WEB-INF/test-data/clef2008AdHoc/output/bl">
                            <include name="*.txt" />
                            <exclude name="*-treceval-report.txt" />
                            <exclude name="*-significance-report.txt" />
                            <exclude name="@{runfile}" />
                        </fileset>
                    </path>
                    <sequential>
                        <java fork="true" classname="ireval.Main" output="@{runfile}-vs-@{runfile2}-significance-report.txt">
                            <classpath>
                                <fileset dir="${base.dir}/lib">
                                    <include name="**.jar" />
                                </fileset>
                                <fileset dir="${base.dir}/lib">
                                    <include name="*.jar" />
                                </fileset>
                            </classpath>
                            <classpath path="${webapp.path}/WEB-INF/classes" />
                            <arg value="@{runfile}" />
                            <arg value="@{runfile2}" />
                            <arg value="${webapp.path}/WEB-INF/test-data/clef2008AdHoc/assessements/bl/10.2454-AH-TEL-ENGLISH-CLEF2008.txt" />
                        </java>
                    </sequential>
                </for>
            </sequential>
        </for>

        <for param="runfile">
            <path>
                <fileset dir="${webapp.path}/WEB-INF/test-data/clef2008AdHoc/base/bnf">
                    <include name="*.txt" />
                    <exclude name="*-treceval-report.txt" />
                    <exclude name="*-significance-report.txt" />
                </fileset>
            </path>
            <sequential>
                <for param="runfile2">
                    <path>
                        <fileset dir="${webapp.path}/WEB-INF/test-data/clef2008AdHoc/output/bnf">
                            <include name="*.txt" />
                            <exclude name="*-treceval-report.txt" />
                            <exclude name="*-significance-report.txt" />
                            <exclude name="@{runfile}" />
                        </fileset>
                    </path>
                    <sequential>
                        <java fork="true" classname="ireval.Main" output="@{runfile}-@{runfile2}-significance-report.txt">
                            <classpath>
                                <fileset dir="${base.dir}/lib">
                                    <include name="**.jar" />
                                </fileset>
                                <fileset dir="${base.dir}/lib">
                                    <include name="*.jar" />
                                </fileset>
                            </classpath>
                            <classpath path="${webapp.path}/WEB-INF/classes" />
                            <arg value="@{runfile}" />
                            <arg value="@{runfile2}" />
                            <arg value="${webapp.path}/WEB-INF/test-data/clef2008AdHoc/assessements/bnf/10.2454-AH-TEL-FRENCH-CLEF2008.txt" />
                        </java>
                    </sequential>
                </for>
            </sequential>
        </for>

        <for param="runfile">
            <path>
                <fileset dir="${webapp.path}/WEB-INF/test-data/clef2008AdHoc/base/onb">
                    <include name="*.txt" />
                    <exclude name="*-treceval-report.txt" />
                    <exclude name="*-significance-report.txt" />
                </fileset>
            </path>
            <sequential>
                <for param="runfile2">
                    <path>
                        <fileset dir="${webapp.path}/WEB-INF/test-data/clef2008AdHoc/output/onb">
                            <include name="*.txt" />
                            <exclude name="*-treceval-report.txt" />
                            <exclude name="*-significance-report.txt" />
                            <exclude name="@{runfile}" />
                        </fileset>
                    </path>
                    <sequential>
                        <java fork="true" classname="ireval.Main" output="@{runfile}-@{runfile2}-significance-report.txt">
                            <classpath>
                                <fileset dir="${base.dir}/lib">
                                    <include name="**.jar" />
                                </fileset>
                                <fileset dir="${base.dir}/lib">
                                    <include name="*.jar" />
                                </fileset>
                            </classpath>
                            <classpath path="${webapp.path}/WEB-INF/classes" />
                            <arg value="@{runfile}" />
                            <arg value="@{runfile2}" />
                            <arg value="${webapp.path}/WEB-INF/test-data/clef2008AdHoc/assessements/onb/10.2454-AH-TEL-GERMAN-CLEF2008.txt" />
                        </java>
                    </sequential>
                </for>
            </sequential>
        </for>
    </target>

    <target name="copyIndexesToDataDirs">
        <delete>
            <fileset dir="./test-index">
                <include name="**/*"/>
                <exclude name="**/*.svn"/>
            </fileset>
        </delete>
        <copy todir="./test-index" overwrite="true">
            <fileset dir="${webapp.path}/WEB-INF/test-index">
                <include name="**/*"/>
            </fileset>
        </copy>
    </target>


    <target name="evaluation-metrics-geotime" description="Generate trec_eval results">
        <for param="runfile">
            <path>
                <fileset dir="d:\\Servidores\\DATA\\ntcir\\runs">
                    <include name="*.txt" />
                    <exclude name="*-treceval-report.txt" />
                    <exclude name="*-significance-report.txt" />
                </fileset>
            </path>
            <sequential>
                <java fork="true" classname="ireval.Main" output="@{runfile}-treceval-report.txt">
                    <classpath>
                        <fileset dir="${base.dir}/lib">
                            <include name="*.jar" />
                        </fileset>
                        <fileset dir="${base.dir}/lib">
                            <include name="*.jar" />
                        </fileset>
                    </classpath>
                    <classpath path="${webapp.path}/WEB-INF/classes" />
                    <arg value="@{runfile}" />
                    <arg value="d:\\Servidores\\DATA\\ntcir\\qrels.txt" />
                </java>
            </sequential>
        </for>
    </target>

</project>