<?xml version="1.0"?>
<project name="Lucene With Geo-Temporal Extensions - Tests" basedir=".">

    <description>Lucene With Geo-Temporal Extensions - Tests</description>

    <import file="build.xml"/>

    <target name="test" depends="compile" description="Unit Tests and Examples">
        <junit showoutput="true" haltonerror="true" printsummary="true">
            <classpath path="${webapp.path}/WEB-INF/classes">
                <fileset dir="${base.dir}/lib">
                    <include name="**.jar" />
                    <exclude name="servlet-api.jar" />
                    <exclude name="jsp-api.jar" />
                </fileset>
                <fileset dir="${base.dir}/lib">
                    <include name="*.jar" />
                </fileset>
            </classpath>

            <!--<test name="pt.utl.ist.lucene.test.highlights.TestHighlightsWithSIMPLE" />-->

            <!--<test name="pt.utl.ist.lucene.test.TestTimeDistanceWithLgteSIMPLE"/>-->
            <!--<test name="pt.utl.ist.lucene.test.TestSpatialDistanceWithLgteSIMPLE" />-->
            <!--<test name="pt.utl.ist.lucene.test.TestTimeDistanceWithLgte" />-->
            <!--<test name="pt.utl.ist.lucene.test.TestSpatialDistanceWithLgteQueryString" />-->
            <!--<test name="pt.utl.ist.lucene.test.TestSpatialDistanceWithLgteQueryParser" />-->
            <!--<test name="pt.utl.ist.lucene.test.TestSpatialDistanceWithLgte" />-->

            <!--<test name="pt.utl.ist.lucene.test.advancedtests.TestSpatialBoxIndexingWithLgte" />-->
            <!--<test name="pt.utl.ist.lucene.test.advancedtests.TestSpatialBoxQueringWithLgte" />-->
            <!--<test name="pt.utl.ist.lucene.test.advancedtests.TestSpatialDistanceFiltering" />-->
            <!--<test name="pt.utl.ist.lucene.test.advancedtests.TestTimeBoxIndexingWithLgte" />-->
            <!--<test name="pt.utl.ist.lucene.test.advancedtests.TestTimeBoxQueringWithLgte" />-->
            <!--<test name="pt.utl.ist.lucene.test.advancedtests.TestTimeDistanceFiltering" />-->
            <!--<test name="pt.utl.ist.lucene.test.advancedtests.TestTimeDistanceInMilisecondsWithLgte" />-->
            <!--<test name="pt.utl.ist.lucene.test.advancedtests.TestTimeIntervalsInMilisecondsWithLgte" />-->

            <!--<test name="pt.utl.ist.lucene.test.modelsorter.TestTimeDistanceWithLgteModelOrderScore" />-->
            <!--<test name="pt.utl.ist.lucene.test.modelsorter.TestTimeDistanceWithLgteModelOrder" />-->
            <!--<test name="pt.utl.ist.lucene.test.modelsorter.TestTimeDistanceWithLgteModel" />-->
            <!--<test name="pt.utl.ist.lucene.test.modelsorter.TestSpatialDistanceWithLgteModelOrderScore" />-->
            <!--<test name="pt.utl.ist.lucene.test.modelsorter.TestSpatialDistanceWithLgteModelFiltering" />-->
            <!--<test name="pt.utl.ist.lucene.test.modelsorter.TestSpatialDistanceWithLgteModel" />-->

            <!--<test name="pt.utl.ist.lucene.test.modelsorter.scoretimespace.TestTimeSpatialTextDistanceTogetherSpatialAndTimeScore" />-->
            <!--<test name="pt.utl.ist.lucene.test.modelsorter.scoretimespace.TestTimeSpatialTextDistanceTogetherChangingConfiguration" />-->
            <!--<test name="pt.utl.ist.lucene.test.modelsorter.scoretimespace.TestTimeSpatialTextDistanceTogetherButOnlySpatialActive" />-->

            <!--<test name="pt.utl.ist.lucene.test.objectwidth.TestWidthSigmoidLgteSIMPLE" />-->

            <!--<test name="pt.utl.ist.lucene.test.qe.TestQueryExpansionWithLgteInsideExpansionSIMPLE" />-->
            <!--<test name="pt.utl.ist.lucene.test.qe.TestQueryExpansionWithLgteSIMPLE" />-->

            <!--<test name="pt.utl.ist.lucene.test.queryconfiguration.TestQueryExpansionConfigurationWithLgteSIMPLE" />-->
            <test name="pt.utl.ist.lucene.test.models.TestBm25" />
            <test name="pt.utl.ist.lucene.test.models.TestBm25WithMultiFields" />
        </junit>
    </target>


    <target name="testAll" depends="" description="Unit Tests and Examples">
        <junit printsummary="yes" haltonfailure="no">
            <classpath path="${webapp.path}/WEB-INF/classes">
                <fileset dir="${base.dir}/lib">
                    <include name="**.jar" />
                    <exclude name="servlet-api.jar" />
                    <exclude name="jsp-api.jar" />
                </fileset>
                <fileset dir="${base.dir}/lib">
                    <include name="*.jar" />
                </fileset>
            </classpath>

            <formatter type="plain"/>

            <batchtest fork="no" todir="${test.report}" >
                <fileset dir="${webapp.path}/WEB-INF/classes">
                    <include name="pt/utl/ist/lucene/test/**/*Test*.java"/>
                    <!--<include name="pt/utl/ist/lucene/test/models/**/*Test*.java"/>-->
                    <!--<include name="pt/utl/ist/lucene/test/multiindexes/**/*Test*.java"/>-->
                </fileset>
            </batchtest>

        </junit>
    </target>

    <target name="testXml" depends="">
        <junit printsummary="false"
               errorProperty="test.failed"
               failureProperty="test.failed">
            <classpath path="${webapp.path}/WEB-INF/classes">
                <fileset dir="${base.dir}/lib">
                    <include name="**.jar" />
                    <exclude name="servlet-api.jar" />
                    <exclude name="jsp-api.jar" />
                </fileset>
                <fileset dir="${base.dir}/lib">
                    <include name="*.jar" />
                </fileset>
            </classpath>
            <formatter type="brief" usefile="false"/>
            <formatter type="xml"/>
            <batchtest fork="no" todir="${test.data}" unless="testcase">
                <fileset dir="${webapp.path}/WEB-INF/classes">
                    <include name="pt/utl/ist/lucene/test/**/*Test*.java"/>
                    <!--<include name="pt/utl/ist/lucene/test/models/**/*Test*.java"/>-->
                    <!--<include name="pt/utl/ist/lucene/test/multiindexes/**/*Test*.java"/>-->
                </fileset>
            </batchtest>
        </junit>
        <junitreport todir="${test.data}">
            <fileset dir="${test.data}">
                <include name="TEST-*.xml"/>
            </fileset>
            <report format="frames"
                    todir="${test.report}"/>
        </junitreport>
        <fail message="Tests failed. Check log and/or reports."
              if="test.failed"/>
    </target>

</project>